#!/bin/bash

set -e

OUTPUT_FILE="./build/index.ts"
LERNAROOT="./"

PACKAGES=$(ls packages)

#echo "// This file was generated by a script. Do not edit directly." > $OUTPUT_FILE

for pkg in $PACKAGES; do
  # Use sed to remove the package scope and replace slashes with dashes
  CLEAN_PKG=$(echo $pkg | sed 's/@.*\///' | tr '/' '-')
  echo "export * from './$CLEAN_PKG';" >> $OUTPUT_FILE
#  echo "export * from './$CLEAN_PKG/esm';" >> $OUTPUT_FILE
done

tsc build/index.ts

