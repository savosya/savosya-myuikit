{"version":3,"file":"mergeRefs-dc8f3646.js","sources":["../../packages/hooks/build/esm/useFocus.js","../../packages/utils/build/esm/mergeRefs.js"],"sourcesContent":["import * as React from 'react';\n\nlet prevInputMethod = undefined;\nfunction handleKeyDown(event) {\n    if (event.key === 'Tab') {\n        prevInputMethod = 'keyboard';\n    }\n}\nfunction handleMouseDown() {\n    prevInputMethod = 'mouse';\n}\nfunction handleTouchStart() {\n    prevInputMethod = 'mouse';\n}\n/**\n * Навешивает несколько глобальных обработчиков и отслеживает метод ввода - мышь или клавиатура.\n * Note: Повторный вызов функции не дублирует обработчики\n */\nfunction addGlobalListeners() {\n    document.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('mousedown', handleMouseDown);\n    document.addEventListener('touchstart', handleTouchStart);\n}\nconst useFocus = (ref, inputMethod) => {\n    const [focus, setFocus] = React.useState(false);\n    const handleFocus = React.useCallback(function () {\n        if (!inputMethod || inputMethod === prevInputMethod) {\n            setFocus(true);\n        }\n    }, [inputMethod]);\n    const handleBlur = React.useCallback(function () {\n        setFocus(false);\n    }, []);\n    React.useEffect(function () {\n        const node = ref.current;\n        if (node) {\n            node.addEventListener('focusin', handleFocus);\n            node.addEventListener('focusout', handleBlur);\n        }\n        return function () {\n            if (node) {\n                node.removeEventListener('focusin', handleFocus);\n                node.removeEventListener('focusout', handleBlur);\n            }\n        };\n    }, [handleBlur, handleFocus, ref]);\n    React.useEffect(addGlobalListeners, []);\n    return [focus];\n};\n\nexport { useFocus };\n//# sourceMappingURL=useFocus.js.map\n","function mergeRefs(refs) {\n    return value => {\n        refs.forEach(ref => {\n            if (typeof ref === 'function') {\n                ref(value);\n            }\n            else if (ref != null) {\n                ref.current = value;\n            }\n        });\n    };\n}\n\nexport { mergeRefs };\n//# sourceMappingURL=mergeRefs.js.map\n"],"names":["prevInputMethod","handleKeyDown","event","handleMouseDown","handleTouchStart","addGlobalListeners","useFocus","ref","inputMethod","focus","setFocus","React.useState","handleFocus","React.useCallback","handleBlur","React.useEffect","node","mergeRefs","refs","value"],"mappings":"wCAEA,IAAIA,EACJ,SAASC,EAAcC,EAAO,CACtBA,EAAM,MAAQ,QACdF,EAAkB,WAE1B,CACA,SAASG,GAAkB,CACvBH,EAAkB,OACtB,CACA,SAASI,GAAmB,CACxBJ,EAAkB,OACtB,CAKA,SAASK,GAAqB,CAC1B,SAAS,iBAAiB,UAAWJ,CAAa,EAClD,SAAS,iBAAiB,YAAaE,CAAe,EACtD,SAAS,iBAAiB,aAAcC,CAAgB,CAC5D,CACK,MAACE,EAAW,CAACC,EAAKC,IAAgB,CACnC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAc,SAAC,EAAK,EACxCC,EAAcC,EAAAA,YAAkB,UAAY,EAC1C,CAACL,GAAeA,IAAgBR,IAChCU,EAAS,EAAI,CAEzB,EAAO,CAACF,CAAW,CAAC,EACVM,EAAaD,EAAAA,YAAkB,UAAY,CAC7CH,EAAS,EAAK,CACjB,EAAE,CAAE,CAAA,EACLK,OAAAA,EAAAA,UAAgB,UAAY,CACxB,MAAMC,EAAOT,EAAI,QACjB,OAAIS,IACAA,EAAK,iBAAiB,UAAWJ,CAAW,EAC5CI,EAAK,iBAAiB,WAAYF,CAAU,GAEzC,UAAY,CACXE,IACAA,EAAK,oBAAoB,UAAWJ,CAAW,EAC/CI,EAAK,oBAAoB,WAAYF,CAAU,EAE/D,CACK,EAAE,CAACA,EAAYF,EAAaL,CAAG,CAAC,EACjCQ,YAAgBV,EAAoB,CAAA,CAAE,EAC/B,CAACI,CAAK,CACjB,EChDA,SAASQ,EAAUC,EAAM,CACrB,OAAOC,GAAS,CACZD,EAAK,QAAQX,GAAO,CACZ,OAAOA,GAAQ,WACfA,EAAIY,CAAK,EAEJZ,GAAO,OACZA,EAAI,QAAUY,EAE9B,CAAS,CACT,CACA"}